<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.wyyuand.dao.CircleReplyMapperExt">

    <resultMap id="BaseResultMap" type="com.wyyuand.domain.CircleReply">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Jul 09 15:01:41 CST 2019.
        -->
        <id column="reply_id" jdbcType="VARCHAR" property="replyId" />
        <result column="nick_name" jdbcType="VARCHAR" property="nickName" />
        <result column="comment_id" jdbcType="VARCHAR" property="commentId" />
        <result column="user_id" jdbcType="VARCHAR" property="userId" />
        <result column="content" jdbcType="VARCHAR" property="content" />
        <result column="status" jdbcType="VARCHAR" property="status" />
        <result column="create_date" jdbcType="TIMESTAMP" property="createDate" />
        <result column="user_logo" jdbcType="VARCHAR" property="userLogo" />

     <!--   <association property="user"  javaType="com.wyyuand.domain.User">
            <id column="user_id" jdbcType="VARCHAR" property="userId" />
            <result column="user_name" jdbcType="VARCHAR" property="userName" />
            <result column="user_pic" jdbcType="VARCHAR" property="userPic" />
        </association>-->

    </resultMap>

    <!--association  1:1   collection：1：n-->
    <!--
        管理员
    -->
    <!--管理员-->
    <select id="queryAllCount"  resultType="int">
       select count(*)
       from t_circle_reply
    </select>

<!--查看帖子回复-->
    <select id="findByPage"  resultMap="BaseResultMap">

          select  reply.*
          from t_circle_reply reply
          ORDER BY create_date DESC
          limit #{0},#{1}

    </select>



    <!--管理员-->
    <select id="queryAllByKeyCount"  parameterType="java.lang.String"  resultType="int">
        select count(*)
        from t_circle_reply
        where 1=1
        <if test="_parameter != null and _parameter !=''">
            AND content LIKE CONCAT(CONCAT('%',#{keyword},'%'))
        </if>
    </select>

    <select id="queryManyByPage"  resultMap="BaseResultMap">

        select  reply.*
        from t_circle_reply reply
        where 1=1
        <if test="_parameter != null and _parameter !=''">
            AND content LIKE CONCAT(CONCAT('%',#{0},'%'))
        </if>
        ORDER BY create_date DESC
        limit #{1},#{2}
    </select>


    <delete id="deleteAll"  parameterType="java.lang.String">

        delete
        from t_circle_reply
        WHERE
        reply_id  in
        <foreach collection="array" item="item" index="index" open="("
                 separator="," close=")">
            #{item}
        </foreach>
    </delete>



    <delete id="deleteByCommentId"  parameterType="java.lang.String">
        delete
        from t_circle_reply
        where 1=1
        <if test="_parameter != null and _parameter !=''">
            AND  comment_id  = #{id}
        </if>

    </delete>



    <delete id="deleteAllByCommentId"  parameterType="java.lang.String">

        delete
        from t_circle_reply
        WHERE
        comment_id  in
        <foreach collection="array" item="item" index="index" open="("
                 separator="," close=")">
            #{item}
        </foreach>
    </delete>

</mapper>